# å‘é‡

è¿™æœ¬ä¹¦ä¸åƒåˆ«çš„ä¹¦é‚£æ ·ä¸€ä¸Šæ¥å°±è®²å‘é‡ï¼Œè€Œæ˜¯è®²tribbleè¡¨ï¼Œå› ä¸ºå®ƒæ˜¯å³å­¦å³ç”¨çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„ä¹Ÿæ˜¯è¡¨ã€‚

å‘é‡ç‰¹åˆ«é‡è¦ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯ä½œè€…æ”¾åœ¨åé¢è®²çš„åŸå› 


```R
# åŠ è½½åŒ…
library(tidyverse)
```

    â”€ [1mAttaching packages[22m â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 1.2.1 â”€
    [32mâœ”[39m [34mggplot2[39m 3.2.0     [32mâœ”[39m [34mpurrr  [39m 0.3.2
    [32mâœ”[39m [34mtibble [39m 2.1.3     [32mâœ”[39m [34mdplyr  [39m 0.8.3
    [32mâœ”[39m [34mtidyr  [39m 0.8.3     [32mâœ”[39m [34mstringr[39m 1.4.0
    [32mâœ”[39m [34mreadr  [39m 1.3.1     [32mâœ”[39m [34mforcats[39m 0.4.0
    â”€ [1mConflicts[22m â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€
    [31mâœ–[39m [34mdplyr[39m::[32mfilter()[39m masks [34mstats[39m::filter()
    [31mâœ–[39m [34mdplyr[39m::[32mlag()[39m    masks [34mstats[39m::lag()



```R
fgf <- function(..., pad = "-"){
    title <- paste0(...)
    width <- getOption("width") - nchar(title) 
    cat(title, " ", stringr::str_dup(pad, floor(width/nchar(pad))), "\n", sep = "")
}
fgf("åˆ†å‰²çº¿")
```

    åˆ†å‰²çº¿ -----------------------------------------------------------------------------



```R
# å‘é‡çš„ä¸¤ç§ç±»å‹ï¼šåŸå­å‘é‡å’Œåˆ—è¡¨
# åŸå­å‘é‡åŒ…æ‹¬ï¼šé€»è¾‘å‹ã€æ•´å‹ã€åŒç²¾åº¦å‹ã€å­—ç¬¦å‹ã€å¤æ•°å‹å’ŒåŸå§‹å‹
# åˆ—è¡¨ä¹Ÿè¢«ç§°ä¸ºé€’å½’å‘é‡

# æŸ¥çœ‹å‘é‡çš„ç±»å‹å’Œé•¿åº¦
typeof(letters)
length(letters)
```


'character'



26


é€»è¾‘å‹ã€æ•°å€¼å‹ã€å­—ç¬¦å‹éƒ½å¾ˆç®€å•ï¼Œä¹‹å‰çœ‹è¿‡åˆ«çš„ä¹¦çš„åº”è¯¥å·²ç»äº†è§£ï¼Œä¸äº†è§£çš„çœ‹äº†è¿™æœ¬ä¹¦ä¹Ÿäº†è§£äº†

æµ®ç‚¹æ•°åœ¨æ¯”è¾ƒæ—¶ä¸èƒ½ä½¿ç”¨â€œ==â€ï¼Œåº”è¯¥ä½¿ç”¨dplyr::near()å‡½æ•°

åŒç²¾åº¦å‹æœ‰å››ä¸ªç‰¹æ®Šå€¼ï¼šNA,NaN,Inf,-Inf


```R
 (x <- c(-1, 0, 1) / 0)
```


<ol class=list-inline>
	<li>-Inf</li>
	<li>NaN</li>
	<li>Inf</li>
</ol>




```R
# ä¸è¦ä½¿ç”¨==æ¥æ£€æŸ¥è¿™äº›ç‰¹æ®Šå€¼ï¼Œè€Œåº”è¯¥ä½¿ç”¨è¾…åŠ©å‡½æ•°
# is.finite()ã€is.infinite()å’Œis.nan()

is.finite(0)
is.finite(x)
is.infinite(x)
is.nan(x)
```


TRUE



<ol class=list-inline>
	<li>FALSE</li>
	<li>FALSE</li>
	<li>FALSE</li>
</ol>




<ol class=list-inline>
	<li>TRUE</li>
	<li>FALSE</li>
	<li>TRUE</li>
</ol>




<ol class=list-inline>
	<li>FALSE</li>
	<li>TRUE</li>
	<li>FALSE</li>
</ol>



## ä½¿ç”¨åŸå­å‘é‡

å°½ç®¡å¯ä»¥æ˜¾å¼çš„è½¬æ¢ï¼Œä½†ä¸€èˆ¬ä¸éœ€è¦ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½æ˜¯éšå¼çš„è½¬æ¢ï¼›å½“ä½¿ç”¨c()å‡½æ•°åˆ›å»ºåŒ…å«å¤šç§ç±»å‹å…ƒç´ çš„å‘é‡æ—¶ï¼Œæ€»ä¼šè½¬æ¢ä¸ºæœ€å¤æ‚çš„ç±»å‹ã€‚


```R
x <- sample(20, 100, replace = T)
y <- x > 10
sum(y)
mean(y)
# ä¸Šé¢å°±æ˜¯éšå¼è½¬æ¢

typeof(c(TRUE, 1L))
typeof(c(1.5, "1"))
# å¤šç§ç±»å‹è½¬åŒ–ä¸ºæœ€å¤æ‚çš„
```


55



0.55



'integer'



'character'



```R
# æ£€éªŒå‘é‡ç±»å‹æœ€å¥½ä½¿ç”¨purrråŒ…çš„is_*å‡½æ•°æ—
# å‘é‡æ˜¯å¯ä»¥è‡ªåŠ¨å¾ªç¯çš„ï¼Œæœ‰äº›æ—¶å€™å»ºè®®æ‰‹åŠ¨ç”¨rep()å‡½æ•°å¾ªç¯

tibble(x = 1:4, y = rep(1:2, 2))
tibble(x = 1:4, y = rep(1:2, each = 2))

# å‘é‡ä¹Ÿæ˜¯å¯ä»¥å‘½åçš„
c(x = 1, y = 2, z = 4)
set_names(1:3, c("a", "b", "c"))
```


<table>
<caption>A tibble: 4 Ã— 2</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td></tr>
	<tr><td>2</td><td>2</td></tr>
	<tr><td>3</td><td>1</td></tr>
	<tr><td>4</td><td>2</td></tr>
</tbody>
</table>




<table>
<caption>A tibble: 4 Ã— 2</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td></tr>
	<tr><td>2</td><td>1</td></tr>
	<tr><td>3</td><td>2</td></tr>
	<tr><td>4</td><td>2</td></tr>
</tbody>
</table>




<dl class=dl-horizontal>
	<dt>x</dt>
		<dd>1</dd>
	<dt>y</dt>
		<dd>2</dd>
	<dt>z</dt>
		<dd>4</dd>
</dl>




<dl class=dl-horizontal>
	<dt>a</dt>
		<dd>1</dd>
	<dt>b</dt>
		<dd>2</dd>
	<dt>c</dt>
		<dd>3</dd>
</dl>




```R
## å–å­é›†

x <-c("one", "two", "three", "four", "five") 
x[c(3, 2, 5)] 

# ä½¿ç”¨è´Ÿæ•´æ•°å–å­é›†æ—¶ï¼Œä¼šä¸¢å¼ƒç›¸åº”ä½ç½®çš„å…ƒç´ ï¼š
x[c(-1, -3, -5)]

# æ­£æ•°ä¸è´Ÿæ•°æ··åˆä½¿ç”¨åˆ™ä¼šå¼•å‘ä¸€ä¸ªé”™è¯¯

# ä¹Ÿå¯ä»¥ä½¿ç”¨é€»è¾‘å–å­é›†
x <-c(10, 3, NA, 5, 8, 1, NA) 
# xä¸­çš„æ‰€æœ‰éç¼ºå¤±å€¼
x[!is.na(x)] 

# å¦‚æœæ˜¯å‘½åå‘é‡ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å­—ç¬¦å‘é‡æ¥å–å­é›†ï¼š
x <-c(abc =1, def =2, xyz =5) 
x[c("xyz", "def")] 
```


<ol class=list-inline>
	<li>'three'</li>
	<li>'two'</li>
	<li>'five'</li>
</ol>




<ol class=list-inline>
	<li>'two'</li>
	<li>'four'</li>
</ol>




<ol class=list-inline>
	<li>10</li>
	<li>3</li>
	<li>5</li>
	<li>8</li>
	<li>1</li>
</ol>




<dl class=dl-horizontal>
	<dt>xyz</dt>
		<dd>5</dd>
	<dt>def</dt>
		<dd>2</dd>
</dl>



åˆ›å»ºèƒ½å¤Ÿæ¥å—ä¸€ä¸ªå‘é‡ä½œä¸ºè¾“å…¥çš„å‡½æ•°ï¼Œå¹¶è¿”å›ä»¥ä¸‹å€¼ã€‚

a. æœ€åä¸€ä¸ªå…ƒç´ ã€‚

b. å¶æ•°ä½ç½®ä¸Šçš„å…ƒç´ ã€‚

c. é™¤æœ€åä¸€ä¸ªå…ƒç´ å¤–çš„æ‰€æœ‰å…ƒç´ ã€‚

d. ä»…è¿”å›å¶æ•°ï¼ˆä¸åŒ…æ‹¬ç¼ºå¤±å€¼ï¼‰ã€‚


```R
y <- sample(20, 10)
y
my_function <- function(x){
    r1 <- x[length(x)]
    r2 <- x[(1:length(x))%%2==0]
    r3 <- x[1:(length(x)-1)]
    r4 <- x[x%%2==0]
    r <- list(r1, r2, r3, r4)
    print(r)
}# è¿™é‡Œä½¿ç”¨äº†åˆ—è¡¨ï¼Œå¦‚æœä¸èµ‹å€¼ï¼Œåé¢çš„è¾“å‡ºä¼šè¦†ç›–å‰é¢çš„

my_function(y)

```


<ol class=list-inline>
	<li>2</li>
	<li>9</li>
	<li>7</li>
	<li>8</li>
	<li>18</li>
	<li>6</li>
	<li>11</li>
	<li>19</li>
	<li>12</li>
	<li>4</li>
</ol>



    [[1]]
    [1] 4
    
    [[2]]
    [1]  9  8  6 19  4
    
    [[3]]
    [1]  2  9  7  8 18  6 11 19 12
    
    [[4]]
    [1]  2  8 18  6 12  4
    


## åˆ—è¡¨

åˆ—è¡¨ç”¨list()å‡½æ•°åˆ›å»ºï¼Œå¯ä»¥åŒ…å«å‰é¢æåˆ°çš„æ‰€æœ‰ç±»å‹ï¼›åˆ—è¡¨çš„å–å­é›†å¯ä»¥ä½¿ç”¨\[\],\[\[\]\]å’Œ$ï¼Œç‰¹æ€§å°±ä¸è¯´äº†ï¼Œçœ‹ä¹¦ã€‚

### æ‰©å±•å‘é‡

å› å­ã€æ—¥æœŸã€æ—¶é—´æ—¥æœŸå’Œtribbleçœ‹ä¹¦
